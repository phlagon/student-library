<div class="glass-card">
    <h3>ğŸ“‚ Categories</h3>
    <div id="category-box" style="display:grid; gap:8px;">
        <div class="cat-item" onclick="loadCat('Theology')">ğŸ“– Theology</div>
        <div class="cat-item" onclick="loadCat('History')">â›ª History</div>
        <div class="cat-item" onclick="loadCat('Mission')">ğŸŒ Mission Focus</div>
        <div class="cat-item" onclick="loadCat('Acts')">ğŸ“œ Acts</div>
        <div class="cat-item" onclick="loadCat('Gospel')">âœï¸ Gospel</div>
        <div class="cat-item" onclick="loadCat('Bible')">ğŸ“˜ Bible</div>
        <div class="cat-item" onclick="loadCat('Other Books')">ğŸ“š Other Books</div>
    </div>
</div>

<script>
// Updated Filtering Logic to handle the new categories
function loadCat(cat) { 
    const list = document.getElementById('full-book-list'); 
    list.innerHTML = "";
    
    // Filter the books based on the category name
    const filtered = collegeBooks.filter(b => b.category === cat);
    
    if(filtered.length === 0) {
        list.innerHTML = `<div style="text-align:center; padding:20px; color:var(--text-sub);">No books found in ${cat} yet.</div>`;
    } else {
        filtered.forEach(b => {
            const recBtn = (currentUser.role === 'faculty') ? 
                `<button class="btn-preview" style="background:var(--orange)" onclick="facultyRecommend('${b.id}','${b.title}')">Recommend</button>` : '';
            
            list.innerHTML += `
                <div class="book-item">
                    <div class="book-info">
                        <b>${b.title}</b>
                        <small>${b.category}</small>
                    </div>
                    <div class="btn-group">
                        <button class="btn-preview" onclick="openPdf('${b.id}','${b.title}')">Preview</button>
                        <button class="btn-preview" style="background:#475569" onclick="borrowB('${b.id}','${b.title}')">Borrow</button>
                        ${recBtn}
                    </div>
                </div>`;
        });
    }
    showFullLibrary(); // Open the overlay to show the filtered results
}
</script>
